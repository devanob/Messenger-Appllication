(window.webpackJsonpmessenger=window.webpackJsonpmessenger||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(16),i=n.n(a),o=(n(69),n(70),n(2)),c=n(3),u=n(8),l=n(7),h=n(9),d=n(5);n(71);var g=function(e){var t=e.onClickHandlier,n=void 0===t?null:t,s=e.children,a=void 0===s?null:s,i=e.text,o=void 0===i?null:i,c=e.className,u=void 0===c?null:c;return r.a.createElement("div",{className:"toggler ".concat(u)},r.a.createElement("button",{onClick:n},o,a))},v=n(22),f=n(23),m=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?null:t,s=e.onChange,a=void 0===s?null:s,i=e.children,o=void 0===i?null:i,c=e.searchHandlier,u=void 0===c?null:c;return r.a.createElement("div",{className:"search-users"},r.a.createElement("form",null,o,r.a.createElement("input",{type:"text",value:n,onChange:a})),r.a.createElement("div",{className:"search-button-container"},r.a.createElement("div",{className:"searchButton",onClick:u},r.a.createElement(v.a,{icon:f.c}))))}}]),t}(s.Component),p=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).setActive=function(){n.props.user.setUserActive()},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.user,t=void 0===e?null:e;return r.a.createElement("li",{onClick:this.setActive},r.a.createElement("a",{href:"#"},r.a.createElement("div",{className:"profile-img"},r.a.createElement("img",{src:"https://via.placeholder.com/500",alt:"user-profile ".concat(t.username)})),r.a.createElement("div",{className:"contact-info"},r.a.createElement("div",null," ",t.username," "))))}}]),t}(s.Component),b=Object(d.c)(p),S=n(33),E=n.n(S),y=function(e){return r.a.createElement("div",{className:"containerLoading"},r.a.createElement(E.a,{animation:"grow",size:"lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},C=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.rootStore,n=e.searchText,s=t.userStore.listActiveContacts;return t.userStore.getIsLoadingActive?r.a.createElement(y,null):s?r.a.createElement("div",{className:"activeUsers"},r.a.createElement("ul",{className:"users"},s.filter(function(e){return e.username.toLowerCase().includes(n.toLowerCase())}).map(function(e){return r.a.createElement(b,{key:e.uuid,user:e})}))):r.a.createElement("div",{className:"activeUsers"},"YOu Have No Contacts..Try Adding Some In The Search User Menu")}}]),t}(s.Component),k=Object(d.b)("rootStore")(Object(d.c)(C)),O=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).acceptRequest=function(e){e.acceptRequest()},n.denyRequest=function(e){e.rejectRequest()},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user,n=void 0===t?null:t;return r.a.createElement("li",{onClick:this.setActive},r.a.createElement("a",{href:"#"},r.a.createElement("div",{className:"profile-img"},r.a.createElement("img",{src:"https://via.placeholder.com/500",alt:"user-profile ".concat(n.username)})),r.a.createElement("div",{className:"contact-info"},r.a.createElement("div",null,n.username)),r.a.createElement("div",{className:"pending-user-control"},r.a.createElement("div",{className:"add-contact"},r.a.createElement("button",{onClick:function(){e.acceptRequest(n)}},"Add")),r.a.createElement("div",{className:"reject-contact"},r.a.createElement("button",{onClick:function(){e.denyRequest(n)}},"Reject")))))}}]),t}(s.Component),j=Object(d.c)(O),U=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.rootStore,n=e.searchText,s=t.userStore.listPendingContacts;return t.userStore.getIsLoadingPending?r.a.createElement(y,null):s?r.a.createElement("div",{className:"pendingUsers"},r.a.createElement("ul",{className:"users"},s.filter(function(e){return e.username.toLowerCase().includes(n.toLowerCase())}).map(function(e){return r.a.createElement(j,{key:e.uuid,user:e})}))):r.a.createElement("div",{className:"pendingUsers"},"YOu Have Pending Contact")}}]),t}(s.Component),M=Object(d.b)("rootStore")(Object(d.c)(U));var L=function(e){var t=e.stateChangeHandler,n=void 0===t?null:t,s=e.viableStates,a=void 0===s?null:s;return null==a?r.a.createElement("div",null,"Viable States Werent Given:Error"):r.a.createElement("div",{className:"users-type-toggler"},r.a.createElement("ul",{className:"users-type-toggler-list"},a.map(function(e){return r.a.createElement("li",{id:e.stateName+"Id",key:e.stateName+"Id",className:"item-type"},r.a.createElement("button",{onClick:function(){return n(e.stateName)}},e.uiName))})))},A=(n(77),n(78),n(79),n(80),n(81),n(82),n(83),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).sendContactRequest=function(e){null!==e&&e.sendContactRequest()},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user,n=void 0===t?null:t,s=n.getExtraMeta.canSendRequest;return r.a.createElement("li",{onClick:this.setActive},r.a.createElement("a",{href:"#"},r.a.createElement("div",{className:"profile-img"},r.a.createElement("img",{src:"https://via.placeholder.com/500",alt:"user-profile ".concat(n.username)})),r.a.createElement("div",{className:"contact-info"},r.a.createElement("div",null,n.username)),s&&r.a.createElement("div",{className:"add-user-container"},r.a.createElement("div",{className:"add-contact"},r.a.createElement("button",{onClick:function(){e.sendContactRequest(n)}},"Send Request")))))}}]),t}(s.Component)),N=Object(d.c)(A),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handlierLoadMoreUsers=function(e){var t=n.props.searchUserStore,s=void 0===t?null:t;null!=s&&s.getNextDataSet()},n.ulRefSearchedUsers=r.a.createRef(),n.heightList=0,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.searchUserStore,n=void 0===t?null:t;e.searchText;if(null==n)return r.a.createElement("div",null,"Seems The RootStore Was Not Provided");var s=n.getSearchedUsers,a=n.getloadingUser,i=n.getNextQueryAddress;return a?r.a.createElement(y,null):s?r.a.createElement("div",{className:"searchUsers"},r.a.createElement("ul",{ref:this.ulRefSearchedUsers,className:"users"},s.map(function(e){return r.a.createElement(N,{key:e.uuid,user:e})}),i&&r.a.createElement("li",{className:"loadContact",onClick:this.handlierLoadMoreUsers},r.a.createElement("div",{className:"loading-contacts-container"},r.a.createElement("div",{className:"load-more-contacts"},r.a.createElement(v.a,{icon:f.b})))))):r.a.createElement("div",{className:"searchUsers"},"No Results....Search For Using Above")}}]),t}(s.Component),x=Object(d.b)("rootStore")(Object(d.c)(w)),I=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).toggleActiveSideBar=function(){n.props.rootStore.uiUserStore.toggleSideBarActive()},n.setSearchText=function(e){n.props.rootStore.uiUserStore.setsearchString(e.target.value)},n.searchForUser=function(){n.props.rootStore.userStore.getSearchUserStore.searchForUsers()},n.setUserUiState=function(e){n.props.rootStore.uiUserStore.setActiveElement(e)},n.viableStates=["ACTIVECONTACTS","PENDNGCONTACT","SEARCHUSER"],n.state={searchText:""},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.rootStore,t=e.uiUserStore.getActiveElement,n=e.uiUserStore.getViableStates,s=this.props.rootStore.uiUserStore.getSearchString,a=null;return"ACTIVECONTACTS"===t?a=r.a.createElement(k,{searchText:s}):"PENDINGCONTACTS"===t?a=r.a.createElement(M,{searchText:s}):"SEARCHPENDING"===t&&(a=r.a.createElement(x,{searchUserStore:e.userStore.getSearchUserStore,searchText:s})),r.a.createElement("div",{className:"sidebar ".concat(e.uiUserStore.getIsActive?"active":"")},r.a.createElement(g,{onClickHandlier:this.toggleActiveSideBar}),r.a.createElement(L,{viableStates:n,stateChangeHandler:this.setUserUiState}),r.a.createElement(m,{searchHandlier:this.searchForUser,value:s,onChange:this.setSearchText,children:null}),a)}},{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t}),console.log(e),console.log(t)}}]),t}(s.Component),T=Object(d.b)("rootStore")(Object(d.c)(I)),P=(n(84),n(18)),R=n.n(P),H=n(27),D=n.n(H),q=n(34),W=n.n(q);function F(e){return r.a.createElement(D.a,{className:"text-center",show:e.show,onHide:e.onHide,size:"lg"},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,{className:"text-center"},"Messenger LogIn")),r.a.createElement(D.a.Body,null,r.a.createElement(R.a.Group,{controlId:"formBasicEmail"},r.a.createElement(R.a.Label,null,"Username"),r.a.createElement(R.a.Control,{value:e.username,onChange:e.onChangeEmail,placeholder:"Enter Username"}),r.a.createElement(R.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.Not Even You")),r.a.createElement(R.a.Group,{controlId:"formBasicPassword"},r.a.createElement(R.a.Label,null,"Password"),r.a.createElement(R.a.Control,{onChange:e.onChangePassword,value:e.password,type:"password",placeholder:"Password"})),r.a.createElement(R.a.Group,{controlId:"formBasicChecbox"},r.a.createElement(R.a.Check,{type:"checkbox",label:"Check me out"})),r.a.createElement(W.a,{onClick:e.logInHandlier,variant:"primary",type:"submit"},"Login")))}n(127);function B(e){return r.a.createElement("div",{className:"account-section ".concat(e.className)},r.a.createElement("button",{onClick:e.onClick},r.a.createElement(v.a,{icon:f.d}),e.children))}var G=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).logInHandlier=function(){var e=n.props.logInStore;(void 0===e?null:e).logInUser(n.state.username,n.state.password)},n.onChangeEmail=function(e){n.setState({username:e.target.value})},n.onChangePassword=function(e){n.setState({password:e.target.value})},n.handleClose=function(){return n.setShow(!1)},n.handleShow=function(){return n.setShow(!0)},n.state={show:!1,username:"",password:""},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"setShow",value:function(e){this.setState(function(t){return{show:e,password:e?t.password:""}})}},{key:"render",value:function(){var e=this.props.logInStore,t=(void 0===e?null:e).isLoggedIn;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{onClick:this.handleShow},t?"LOGOUT":"LOGIN"),r.a.createElement(F,{show:!t&&this.state.show,onHide:this.handleClose,username:this.state.username,password:this.state.password,onChangeEmail:this.onChangeEmail,onChangePassword:this.onChangePassword,logInHandlier:this.logInHandlier}))}}]),t}(s.Component),_=Object(d.c)(G),J=(n(128),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).toggleSideBarState=function(){n.props.rootStore.uiUserStore.toggleSideBarActive()},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){this.props.searchText;return r.a.createElement("div",{className:"nav-bar-componet"},r.a.createElement(g,{onClickHandlier:this.toggleSideBarState,className:"main-toggle"},r.a.createElement(v.a,{icon:f.a}),"  Open/Close "),r.a.createElement(_,{logInStore:this.props.rootStore.logInStore}))}}]),t}(s.Component)),V=Object(d.b)("rootStore")(J),Q=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=void 0===t?null:t,s=e.activeUser,a=void 0===s?null:s,i=null;i=n.from_User===a?"left":"right";var o="message ".concat(i);return r.a.createElement("li",{key:n.id,className:o},r.a.createElement("div",{className:"message-box"},n.message))}}]),t}(s.Component),z=Object(d.c)(Q),Y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).ulRef=r.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.ulRef.current.scrollTop=this.ulRef.current.scrollHeight}},{key:"componentDidMount",value:function(){this.ulRef.current.scrollTop=this.ulRef.current.scrollHeight,console.log(this.ulRef.current.scrollHeight)}},{key:"render",value:function(){var e=this.props,t=e.messages,n=void 0===t?null:t,s=e.activeUser,a=void 0===s?null:s;return r.a.createElement("ul",{ref:this.ulRef,className:"message-list-area"},n.map(function(e){return r.a.createElement(z,{key:e.id,message:e,activeUser:a})}))}}]),t}(s.Component),$=Object(d.b)("rootStore")(Object(d.c)(Y)),K=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.rootStore,t=e.userStore.currentActiveUser,n=e.userMessageStore.getMessagesActiveUser,s=null;if(null==t)s=r.a.createElement("div",null,"No Active User Click On One");else{var a=t.uuid,i=n;s=null===i?r.a.createElement("div",null," Still Loading MEssages "):r.a.createElement($,{messages:i.messages,activeUser:a})}return r.a.createElement("div",{className:"message-componet"},s)}}]),t}(s.Component),X=Object(d.b)("rootStore")(Object(d.c)(K)),Z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).textInputEnter=r.a.createRef(),n.onEnter=function(e){var t=n.props.sendMessageHandlier,s=void 0===t?null:t;"Enter"===e.code&&null!=s&&s()},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.textInputEnter.current.addEventListener("keyup",this.onEnter,!1)}},{key:"render",value:function(){var e=this.props,t=e.text,n=void 0===t?null:t,s=e.onTextChange,a=void 0===s?null:s;return r.a.createElement("div",{className:"textBox"},r.a.createElement("textarea",{ref:this.textInputEnter,onChange:a,value:n}," "))}}]),t}(s.Component),ee=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onTextChange,n=void 0===t?null:t,s=e.messgObject,a=void 0===s?null:s,i=e.sendMessageHandlier,o=void 0===i?null:i,c=a.contructedMessageInternelMessage;return r.a.createElement("div",{className:"text-box-message-componet"},r.a.createElement(Z,{sendMessageHandlier:o,text:c,onTextChange:n}))}}]),t}(s.Component),te=Object(d.c)(ee),ne=(n(129),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).toggleActiveSideBar=function(){n.props.rootStore.uiUserStore.toggleSideBarActive()},n.setMessageToSend=function(e){var t=e.target.value,s=n.props.rootStore;t.trim().length>0?s.userMessageStore.setMessageText(t):s.userMessageStore.setMessageText("")},n.sendMessageHandlier=function(){n.props.rootStore.userMessageStore.sendMessage()},n.state={searchText:""},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.rootStore.userMessageStore;return r.a.createElement("div",{className:"MainContent"},r.a.createElement(V,null),r.a.createElement(X,null),r.a.createElement(te,{messgObject:e,onTextChange:this.setMessageToSend,sendMessageHandlier:this.sendMessageHandlier}))}},{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t}),console.log(e),console.log(t)}}]),t}(s.Component)),se=Object(d.b)("rootStore")(ne);var re=function(){return r.a.createElement("div",{className:"container-messenger"},r.a.createElement(T,null),r.a.createElement(se,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=n(14),ie=n.n(ae),oe=n(21),ce=n(1),ue=n(17),le=n.n(ue),he=n(61);Object(ce.f)({enforceActions:"observed"});var de=function(){function e(){var t=this;Object(o.a)(this,e),this.tokenHeaderReady=null,this.reconnectingWebSocket=null,this.webSocketisConnected=!1,this.webSocketisError=!1,this.isLoggin=!1,this.authToken=null,this.eventListener={},this.base_url="",this.eventReceiverHandlier=function(e){var n=JSON.parse(e.data),s=n.type.trim().toLowerCase();if("undefined"!==typeof s|null!==s){var r=t.eventListener[s];null!==r|"undefined"!==typeof r&&r.forEach(function(e){try{e.length<1?e():e(n)}catch(t){console.log(t)}})}},this.headersList={headers:{"Content-Type":"application/json"}},Object(ce.r)(function(){return t.isLoggedIn},function(){t.setUpWebSocket()}),this.checkUserLoggedIn().then(function(e){null!=e?t.setLoggedIn(!0):t.setLoggedIn(!1)})}return Object(c.a)(e,[{key:"addEventListenerHandlier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e|null===t|!e instanceof String)console.log("Cannot Add Empty Event Or Handliers or null or not string");else{var n=this.eventListener[e];null!==n&"undefined"!==typeof n?n.push(t):(this.eventListener[e]=[],this.eventListener[e].push(t))}}},{key:"sendMessageWebSocket",value:function(e){var t=this;return new Promise(function(n,s){t.webSocketisConnected?(e.type="message",e=JSON.stringify(e),t.reconnectingWebSocket.send(e),n(!0)):s(!1)})}},{key:"setWebSocketError",value:function(e){this.webSocketisError=e}},{key:"setLoggedIn",value:function(e){this.isLoggin=e}},{key:"setConnectedWebSocketFlag",value:function(e){this.webSocketisConnected=!0}},{key:"setUpWebSocket",value:function(){var e=Object(oe.a)(ie.a.mark(function e(){var t,n=this;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="ws://127.0.0.1:8000/ws/messenger/?token=".concat(this.authToken),this.reconnectingWebSocket=new he.a(t),this.reconnectingWebSocket.addEventListener("open",function(){console.log("Connected To WebSocket"),n.setConnectedWebSocketFlag(!0)}),this.reconnectingWebSocket.addEventListener("error",function(e){console.log(e),n.setConnectedWebSocketFlag(!1)}),this.reconnectingWebSocket.addEventListener("close",function(e){console.log("Disconnected To WebSocket"),n.setConnectedWebSocketFlag(!1)}),this.reconnectingWebSocket.addEventListener("message",this.eventReceiverHandlier);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getContacts",value:function(){return le.a.get("http://127.0.0.1:8000/user/api/users/active_contacts/",this.headersList).then(function(e){return e.data})}},{key:"getPendingContacts",value:function(){return le.a.get("http://127.0.0.1:8000/user/api/users/pending_contacts/",this.headersList).then(function(e){return e.data})}},{key:"getMessages",value:function(){return le.a.get("http://127.0.0.1:8000/api/message/",this.headersList).then(function(e){return e.data})}},{key:"getLoginToken",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null==t||null==n?new Promise(function(t,n){e.tokenHeaderReady?t(!0):n(!1)}):le.a.post("http://127.0.0.1:8000/user/api/auth/login/",{username:t,password:n},this.headersList).then(function(t){var n=t.data;return e.headersList.headers.Authorization="Token ".concat(n.token),e.tokenHeaderReady=!0,e.authToken=n.token,e.setLoggedIn(!0),e.headersList.headers.Authorization})}},{key:"acceptContactRequest",value:function(e){var t="http://127.0.0.1:8000/api/pending-contacts/".concat(e,"/");return le.a.put(t,{},this.headersList).then(function(e){return 200===e.status&&e.data})}},{key:"denyContactRequest",value:function(e){console.log(e),console.log(this.headersList);var t="http://127.0.0.1:8000/api/pending-contacts/".concat(e,"/");return le.a.delete(t,this.headersList).then(function(e){return 200===e.status&&e.data})}},{key:"searchUsers",value:function(e){return le.a.get("http://127.0.0.1:8000/api/users/?search=".concat(e),this.headersList).then(function(e){return e.data})}},{key:"sendContactRequest",value:function(e){return le.a.post("http://127.0.0.1:8000/api/pending-contacts/",{uuid:e},this.headersList).then(function(e){return e})}},{key:"getNextUsersSet",value:function(e){return le.a.get(e,this.headersList).then(function(e){return e.data})}},{key:"checkUserLoggedIn",value:function(){return this.checkLoggedInAPI().then(function(e){return 200===e.status&&!0===e.data.isLoggedIn?e.data.user:null})}},{key:"checkLoggedInAPI",value:function(){return le.a.get("http://127.0.0.1:8000/api/auth/islogin/",this.headersList).then(function(e){return e})}},{key:"isLoggedIn",get:function(){return this.isLoggin}}],[{key:"createWithLoginToken",value:function(){var t=Object(oe.a)(ie.a.mark(function t(){var n,s,r=arguments;return ie.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:null,s=new e,t.next=4,s.getLoginToken(n.username,n.password).then(function(e){console.log("hbfhjfhjejehjhefvh")}).catch(function(e){console.log(e)});case 4:return t.abrupt("return",s);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}]),e}();Object(ce.h)(de,{isLoggin:ce.m,webSocketisConnected:ce.m,setConnectedWebSocketFlag:ce.d,setLoggedIn:ce.d,setWebSocketError:ce.d,isLoggedIn:ce.e});var ge=de,ve=n(62);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}var me=function(){function e(t,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(o.a)(this,e),this.username=null,this.uuid=null,this.user_image=null,this.store=null,this.areActiveContact=null,this.extraMeta={},this.store=t,this.username=n.username,this.uuid=n.uuid,this.username=this.username,this.areActiveContact=!!s}return Object(c.a)(e,[{key:"setExtraMeta",value:function(e){this.extraMeta=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach(function(t){Object(ve.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.extraMeta,{},e)}},{key:"acceptRequest",value:function(){!1===this.areActiveContact&&this.store.requestAcceptHandlier(this)}},{key:"rejectRequest",value:function(){!1===this.areActiveContact&&this.store.requestDenyHandlier(this)}},{key:"sendContactRequest",value:function(){this.store.sendContactRequest(this)}},{key:"setUserActive",value:function(){this.store&&this.store.setActiveContact(this)}},{key:"upDate",value:function(e){this.username=this.username,this.user_image=this.user_image,this.uuid=this.uuid}},{key:"asJson",value:function(){return{uuid:this.uuid,username:this.username,user_image:this.user_image}}},{key:"toString",value:function(){return"UUID: ".concat(this.uuid," \n                USERNAME: ").concat(this.username," \n                USER IMAGE:").concat(this.user_image," \n                Active:").concat(this.areActiveContact?"Active":"Inactive")}},{key:"getExtraMeta",get:function(){return this.extraMeta}}]),e}();Object(ce.h)(me,{extraMeta:ce.m,setExtraMeta:ce.d});var pe=n(63);Object(ce.f)({enforceActions:"observed"});var be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(o.a)(this,e),this.searchedUsers=[],this.nextQueryAddress=null,this.uiSideBar=null,this.transporLayer=null,this.loadingUsers=!1,this.loadUserError=!1,this.store=t,this.transporLayer=n,this.uiStore=s}return Object(c.a)(e,[{key:"setSearchUsers",value:function(e){var t,n=this,s=e.map(function(e){var t=new me(n,e,!1);return t.setExtraMeta({canSendRequest:!0}),t});(t=this.searchedUsers).push.apply(t,Object(pe.a)(s))}},{key:"searchForUsers",value:function(){var e=this,t=this.uiStore.getSearchString;t.trim().length<1||(this.loadingUsers=!0,this.searchedUsers=[],this.loadUserError=!1,this.transporLayer.searchUsers(t).then(Object(ce.d)(function(t){e.setSearchUsers(t.results),e.nextQueryAddress=t.next,e.loadUserError=!1,e.loadingUsers=!1})).catch(Object(ce.d)(function(t){e.loadUserError=!0,e.loadingUsers=!1})))}},{key:"sendContactRequest",value:function(e){var t=this;this.transporLayer.sendContactRequest(e.uuid).then(Object(ce.d)(function(n){201===n.status?t.searchedUsers=t.searchedUsers.filter(function(t){return t.uuid!==e.uuid}):201!==n.status&&n.status<300&&e.setExtraMeta({canSendRequest:!1})}))}},{key:"getNextDataSet",value:function(){var e=this;this.transporLayer.getNextUsersSet(this.nextQueryAddress).then(Object(ce.d)(function(t){e.setSearchUsers(t.results),e.nextQueryAddress=t.next})).catch(function(e){})}},{key:"getloadingUser",get:function(){return this.loadingUsers}},{key:"getloadingUserError",get:function(){return this.loadUserError}},{key:"getNextQueryAddress",get:function(){return this.nextQueryAddress}},{key:"getSearchedUsers",get:function(){return!(this.searchedUsers.length<1)&&this.searchedUsers}}]),e}();Object(ce.h)(be,{searchedUsers:ce.m,setSearchUsers:ce.d,getNextDataSet:ce.d,apiSearch:ce.d,getloadingUser:ce.e,getloadingUserError:ce.e,getSearchedUsers:ce.e,searchForUsers:ce.d,loadingUsers:ce.m,loadUserError:ce.m}),Object(ce.f)({enforceActions:"observed"});var Se=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(o.a)(this,e),this.currentActiveUser=null,this.activeContacts=[],this.pendingContacts=[],this.isLoadingActiveContactsFlag=!0,this.isLoadingPendingContactsFlag=!0,this.loadingActiveError=!1,this.loadingPendingError=!1,this.transporLayer=null,this.searchStore=null,this.store=n,this.transporLayer=s,this.searchStore=new be(this,this.transporLayer,r),Object(ce.r)(function(){return t.transporLayer.isLoggedIn},function(){t.asyncLoadData().then(function(e){console.log(e)}).catch(function(e){console.log(e)})})}return Object(c.a)(e,[{key:"loadData",value:function(){this.loadContacts(),this.loadPendingContacts()}},{key:"asyncLoadData",value:function(){var e=Object(oe.a)(ie.a.mark(function e(){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadContacts();case 3:return e.next=5,this.loadPendingContacts();case 5:return e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"setLoadingActive",value:function(e){this.isLoadingActiveContactsFlag=e}},{key:"setLoadingPending",value:function(e){this.isLoadingPendingContactsFlag=e}},{key:"setUserModel",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!0===t){var n=this.activeContacts.find(function(t){return t.uuid===e.uuid});null!=n?n.upDate(e):this.activeContacts.push(e)}else{var s=this.pendingContacts.find(function(t){return t.uuid===e.uuid});null!=s?s.upDate(e):this.pendingContacts.push(e)}}},{key:"setUser",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!0===t){var n=this.activeContacts.find(function(t){return t.uuid===e.uuid});null!=n?n.upDate(e):this.activeContacts.push(new me(this,e,!0))}else{var s=this.pendingContacts.find(function(t){return t.uuid===e.uuid});null!=s?s.upDate(e):this.pendingContacts.push(new me(this,e,!1))}}},{key:"loadContacts",value:function(){var e=this;return this.setLoadingActive(!0),this.transporLayer.getContacts().then(function(t){0!==t.length?(t.forEach(function(t){e.setUser(t,!0)}),e.setLoadingActive(!1)):e.setLoadingActive(!1)}).catch(function(t){console.log(t),e.loadingActiveError=!0})}},{key:"loadPendingContacts",value:function(){var e=this;return this.setLoadingPending(!0),this.transporLayer.getPendingContacts().then(function(t){0!==t.length?(t.forEach(function(t){e.setUser(t,!1)}),e.setLoadingPending(!1)):e.setLoadingPending(!1)}).catch(function(t){console.log(t),e.loadingPendingError=!0})}},{key:"setActiveContact",value:function(e){if(0===this.activeContacts.length||null===e)return!1;var t=this.activeContacts.find(function(t){return t.uuid===e.uuid||t.username===e.username});return null!==t&&(this.currentActiveUser=t,this.generateActiveUserList(),!0)}},{key:"requestAcceptHandlier",value:function(e){var t=this;this.transporLayer.acceptContactRequest(e.uuid).then(Object(ce.d)(function(n){if(n){e.areActiveContact=!0;var s=t.pendingContacts.filter(function(t){return t.uuid!==e.uuid});t.pendingContacts.replace(s),t.setUserModel(e,e.areActiveContact)}}))}},{key:"requestDenyHandlier",value:function(e){var t=this;this.transporLayer.denyContactRequest(e.uuid).then(Object(ce.d)(function(n){if(n){var s=t.pendingContacts.filter(function(t){return t.uuid!==e.uuid});t.pendingContacts.replace(s)}}))}},{key:"generateActiveUserList",value:function(){var e=this,t=this.activeContacts.filter(function(t){return t.uuid!==e.currentActiveUser.uuid});t.unshift(this.currentActiveUser),this.activeContacts=t}},{key:"asJson",value:function(){return{activeContacts:this.activeContacts.map(function(e){return e.asJson()}),pendingContacts:this.pendingContacts.map(function(e){return e.asJson()})}}},{key:"toString",value:function(){}},{key:"getSearchUserStore",get:function(){return this.searchStore}},{key:"getIsLoadingActive",get:function(){return this.isLoadingActiveContactsFlag}},{key:"getIsLoadingPending",get:function(){return this.isLoadingPendingContactsFlag}},{key:"getLoadingActiveError",get:function(){return this.loadingActiveError}},{key:"getLoadingPendingError",get:function(){return this.loadingPendingError}},{key:"listActiveContacts",get:function(){return 0!==this.activeContacts.length&&this.activeContacts}},{key:"listPendingContacts",get:function(){return null!==this.pendingContacts&&0!==this.pendingContacts.length&&this.pendingContacts}}]),e}();Object(ce.h)(Se,{activeContacts:ce.m,pendingContacts:ce.m,isLoadingActiveContactsFlag:ce.m,isLoadingPendingContactsFlag:ce.m,setUser:ce.d,loadContacts:ce.d,setLoadingActive:ce.d,setLoadingPending:ce.d,listActiveContacts:ce.e,setActiveContact:ce.d,loadingActiveError:ce.m,loadingPendingError:ce.m,listPendingContacts:ce.e,currentActiveUser:ce.m,requestAcceptHandlier:ce.d,requestDenyHandlier:ce.d,getLoadingActiveError:ce.e,getLoadingPendingError:ce.e,getIsLoadingPending:ce.e,getIsLoadingActive:ce.e}),Object(ce.f)({enforceActions:"observed"});var Ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(o.a)(this,e),this.viableStates=[{ACTIVECONTACTS:1,uiName:"Active Contacts",stateName:"ACTIVECONTACTS"},{PENDINGCONTACTS:2,uiName:"Pending Contacts",stateName:"PENDINGCONTACTS"},{SEARCHPENDING:3,uiName:"Search Contacts",stateName:"SEARCHPENDING"}],this.activeElement="ACTIVECONTACTS",this.isActive=!0,this.store=null,this.searchString="",this.store=t}return Object(c.a)(e,[{key:"setsearchString",value:function(e){this.searchString=e}},{key:"toggleSideBarActive",value:function(){this.isActive=!this.isActive}},{key:"setActiveElement",value:function(e){var t=this;null!=e?(e===this.activeElement&&(this.searchString=""),this.viableStates.forEach(function(n){e in n&&(e!==t.activeElement&&(t.searchString=""),t.activeElement=e)})):console.log("Null Given For State: Error")}},{key:"getActiveElement",get:function(){return this.activeElement}},{key:"getIsActive",get:function(){return this.isActive}},{key:"getSearchString",get:function(){return this.searchString}},{key:"getViableStates",get:function(){return this.viableStates}}]),e}();Object(ce.h)(Ee,{activeElement:ce.m,isActive:ce.m,getActiveElement:ce.e,getIsActive:ce.e,toggleSideBarActive:ce.d,setActiveElement:ce.d,searchString:ce.m,getSearchString:ce.e,setsearchString:ce.d});var ye=Ee;Object(ce.f)({enforceActions:"observed"});var Ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(o.a)(this,e),this.user=null,this.messages=[],this.store=t,this.user=n}return Object(c.a)(e,[{key:"addMessage",value:function(e){e.to_User!==this.user.uuid&&e.from_User!==this.user.uuid||this.messages.push(e)}},{key:"bulkAddMessages",value:function(e){var t=this;e.forEach(function(e){t.addMessage(e)})}},{key:"asJson",value:function(){return{user:this.user.uuid,messages:this.messages}}},{key:"toString",value:function(){}},{key:"getMessages",get:function(){return this.userMesages}}]),e}();Object(ce.h)(Ce,{messages:ce.m,addMessage:ce.d,getMessages:ce.e,bulkAddMessages:ce.d});var ke=Ce;Object(ce.f)({enforceActions:"observed"});var Oe=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(o.a)(this,e),this.userMesagesModels={},this.isLoadingMesagesFlag=!0,this.loadingMessagesError=!1,this.transporLayer=null,this.userStore=null,this.contructedMessage={toUser:null,message:""},this.receiveMessage=function(e){var n=t.userMesagesModels[e.to_User],s=t.userMesagesModels[e.from_User];console.log(t.userMesagesModels),null!==n&"undefined"!==typeof n?n.addMessage(e):null!==s&"undefined"!==typeof s&&s.addMessage(e)},this.store=n,this.transporLayer=s,this.userStore=r,null!=this.store&&(Object(ce.n)(function(){return t.store.userStore.currentActiveUser},function(e){t.setMessageText(""),t.setMessageUser(e)}),null!==this.transporLayer&&this.transporLayer.addEventListenerHandlier("message",this.receiveMessage)),null!=this.userStore&&Object(ce.r)(function(){return!t.userStore.getLoadingActiveError&&!t.userStore.getIsLoadingActive},function(){t.setContactUsers(t.userStore.listActiveContacts).then(function(e){!0===e&&t.loadMessages()}).catch(function(e){console.log(e)})})}return Object(c.a)(e,[{key:"sendMessage",value:function(){var e=this;if(null!==this.contructedMessage.toUser)if(this.contructedMessage.toUser.uuid===this.store.userStore.currentActiveUser.uuid&this.contructedMessageInternelMessage.trim().length>0){var t=this.constructMessageToSend();console.log(t),this.transporLayer.sendMessageWebSocket(t).then(function(t){e.setMessageText("")}).catch(function(e){})}else console.log("reset"),this.setMessageText(""),this.setMessageUser(this.store.userStore.currentActiveUser)}},{key:"constructMessageToSend",value:function(){return{toUser:this.contructedMessage.toUser.uuid,message:this.contructedMessage.message.trim()}}},{key:"setMessageText",value:function(e){this.contructedMessage.message=e}},{key:"setMessageUser",value:function(e){this.contructedMessage.toUser=e}},{key:"setContactSingle",value:function(e){if(!(e.uuid in this.userMesagesModels)){var t=e.uuid;this.userMesagesModels[t]=new ke(this,e)}}},{key:"setContactUsers",value:function(e){var t=this;return new Promise(function(n,s){t.userMesagesModels={},e.length>1?(e.forEach(function(e){var n=e.uuid;t.userMesagesModels[n]=new ke(t,e)}),n(!0)):s(!1)})}},{key:"loadMessages",value:function(){var e=Object(oe.a)(ie.a.mark(function e(){var t=this;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.userMesagesModels){e.next=2;break}return e.abrupt("return",this.transporLayer.getMessages().then(function(e){for(var n in t.userMesagesModels)t.userMesagesModels[n].bulkAddMessages(e)}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"asJson",value:function(){return{MessageModel:this.userMesagesModels}}},{key:"toString",value:function(){}},{key:"contructedMessageInternelMessage",get:function(){return this.contructedMessage.message}},{key:"getMessagesActiveUser",get:function(){if(this.contructedMessage.toUser){var e=this.contructedMessage.toUser;return e.uuid in this.userMesagesModels?this.userMesagesModels[e.uuid]:(this.setContactSingle(e),this.userMesagesModels[e.uuid])}return console.log("no active User"),null}},{key:"getMessages",get:function(){return this.userMesagesModels}},{key:"getContructedMessage",get:function(){return this.contructedMessage}}]),e}();Object(ce.h)(Oe,{userMesagesModels:ce.m,isLoadingMesagesFlag:ce.m,loadingMessagesError:ce.m,setContactUsers:ce.d,getMessages:ce.e,contructedMessage:ce.m,getContructedMessage:ce.e,setMessageText:ce.d,contructedMessageInternelMessage:ce.e,setMessageUser:ce.d,sendMessage:ce.d,getMessagesActiveUser:ce.e,setContactSingle:ce.d});var je=Oe;Object(ce.f)({enforceActions:"observed"});var Ue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(o.a)(this,e),this.store=t,this.transporLayer=n,this.uiStore=s}return Object(c.a)(e,[{key:"logInUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==e||null==t||this.transporLayer.getLoginToken(e=e,t=t).then(function(e){!0===e&&console.log("we Log in ")})}},{key:"isLoggedIn",get:function(){return null!=this.transporLayer&&this.transporLayer.isLoggedIn}}]),e}();Object(ce.h)(Ue,{isLoggedIn:ce.e,logInUser:ce.d}),Object(ce.f)({enforceActions:"observed"});var Me=new(function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(o.a)(this,e),this.transportLayer=null,this.userStore=null,this.uiSideBarStore=null,this.transportLayer=new ge,this.uiUserStore=new ye(this),this.userStore=new Se(this,this.transportLayer,this.uiUserStore),this.userMessageStore=new je(this,this.transportLayer,this.userStore),this.logInStore=new Ue(this,this.transportLayer,this.uiSideBarStore),this.startAsyncServices().then(function(e){}).catch(function(e){console.log(e)})}return Object(c.a)(e,[{key:"startAsyncServices",value:function(){var e=Object(oe.a)(ie.a.mark(function e(){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}())(null,null);i.a.render(r.a.createElement(d.a,{rootStore:Me},r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},64:function(e,t,n){e.exports=n(147)},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.fd5a08a5.chunk.js.map